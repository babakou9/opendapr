<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get the URL of — get_url • opendapr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Get the URL of — get_url" />

<meta property="og:description" content="some descirption" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">opendapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/simple_workflow.html">Simple workflow : Download data for a given region of interest and time frame</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ptaconet/opendapr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get the URL of</h1>
    <small class="dont-index">Source: <a href='https://github.com/ptaconet/opendapr/blob/master/R/get_url.R'><code>R/get_url.R</code></a></small>
    <div class="hidden name"><code>get_url.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>some descirption</p>
    
    </div>

    <pre class="usage"><span class='fu'>get_url</span>(<span class='no'>collection</span>, <span class='kw'>variables</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>roi</span>, <span class='no'>time_range</span>,
  <span class='kw'>output_format</span> <span class='kw'>=</span> <span class='st'>"nc4"</span>, <span class='kw'>single_netcdf</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>opt_param</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>credentials</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>collection</th>
      <td><p>string. Collection of interest.</p></td>
    </tr>
    <tr>
      <th>variables</th>
      <td><p>string vector. Variables to retrieve for the collection of interest. If not specified (default) all available variables will be extracted.</p></td>
    </tr>
    <tr>
      <th>roi</th>
      <td><p>object of class <code>sf</code> or <code>sfc</code> Region of interest. Must be POLYGON-type geometry. Can be composed of several features (see details).</p></td>
    </tr>
    <tr>
      <th>time_range</th>
      <td><p>date(s) / POSIXlt of interest (single date/datetime or time frame : vector with start and end dates/times) (see details)</p></td>
    </tr>
    <tr>
      <th>output_format</th>
      <td><p>string. Output format. Available options are : "nc4" (default), "ascii", "json"</p></td>
    </tr>
    <tr>
      <th>single_netcdf</th>
      <td><p>boolean. Get the URL either as a single file that encompasses the whole time frame (TRUE) or as multiple files (1 for each date) (FALSE). Default to TRUE. Currently enabled only for MODIS and VIIRS collections.</p></td>
    </tr>
    <tr>
      <th>opt_param</th>
      <td><p>list of optional arguments (see details). This parameter is the output of the function <a href='get_optional_parameters.html'>get_optional_parameters</a>.</p></td>
    </tr>
    <tr>
      <th>credentials</th>
      <td><p>vector string. In case of data that needs login : string vector of length 2 with username and password</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>boolean. Verbose (default FALSE)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a data.frame with one row for each dataset to download and 4 columns  :</p><ul>
<li><p>*time_start* : Start Date/time for the dataset</p></li>
<li><p>*name* : An indicative name for the dataset</p></li>
<li><p>*url* : http URL (OPeNDAP) of the dataset</p></li>
<li><p>*destfile* : An indicative destination file for the dataset</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This is the main function of the package. It enables to retrieve</p>
<p>#' Argument <code>time_range</code> can be provided either as a single date (e.g. <code>as.Date("2017-01-01"))</code> or time frame provided as two bounding dates ( e.g. <code><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date(c("2010-01-01","2010-01-30"))</a></code>) or as a POSIXlt single time or time range (e.g. "2010-01-01 18:00:00") for the half-hourly collection (GPM_3IMERGHH.06). If POSIXlt, times must be in UTC.</p>
<p>Argument <code>optionals_opendap</code> is optional. This parameter is automatically calculated within the function if it is not provided. However, providing it optimizes the performances of the function (i.e. fasten the processing time).
It might be particularly useful to provide it if looping over the same ROI or dates is planned.
The parameter can be retrieved outside the function with the function <code><a href='get_optional_parameters.html'>get_optional_parameters</a></code>.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>some note</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
</div><div class='input'><span class='co'>### First login to Earthdata</span>
<span class='no'>log</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='login.html'>login</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Sys.getenv'>Sys.getenv</a></span>(<span class='st'>"earthdata_un"</span>),<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Sys.getenv'>Sys.getenv</a></span>(<span class='st'>"earthdata_pw"</span>)))</div><div class='output co'>#&gt; Checking credentials...</div><div class='output co'>#&gt; <span class='error'>Error in login(c(Sys.getenv("earthdata_un"), Sys.getenv("earthdata_pw"))): l'argument "source" est manquant, avec aucune valeur par défaut</span></div><div class='input'>
<span class='co'>############################################################</span>
<span class='co'>### Retrieve the URLs (OPeNDAP) to download the following datasets :</span>
<span class='co'># MODIS Terra LST Daily (MOD11A1.006) (collection)</span>
<span class='co'># Day + Night bands (LST_Day_1km,LST_Night_1km) (variables)</span>
<span class='co'># over a 50km x 70km region of interest (roi)</span>
<span class='co'># for the time frame 2017-01-01 to 2017-01-30 (30 days) (time_range)</span>

(<span class='no'>opendap_urls_mod11a1</span> <span class='kw'>&lt;-</span> <span class='fu'>get_url</span>(<span class='kw'>collection</span> <span class='kw'>=</span> <span class='st'>"MOD11A1.006"</span>,
<span class='kw'>variables</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"LST_Day_1km"</span>,<span class='st'>"LST_Night_1km"</span>),
<span class='kw'>roi</span> <span class='kw'>=</span> <span class='kw pkg'>sf</span><span class='kw ns'>::</span><span class='fu'><a href='https://www.rdocumentation.org/packages/sf/topics/st_read'>st_read</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"extdata/roi_example.gpkg"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"opendapr"</span>),<span class='kw'>quiet</span><span class='kw'>=</span><span class='fl'>TRUE</span>),
<span class='kw'>time_range</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"2017-01-01"</span>,<span class='st'>"2017-01-30"</span>))
))</div><div class='output co'>#&gt; <span class='error'>Error in login(credentials): credentials must be a vector character string of length 2 (username and password)</span></div><div class='input'><span class='co'>############################################################</span>

<span class='co'>### Download the data :</span>

<span class='no'>res_dl</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='download_data.html'>download_data</a></span>(<span class='no'>opendap_urls_mod11a1</span>)</div><div class='output co'>#&gt; <span class='error'>Error in inherits(df_to_dl, "data.frame"): objet 'opendap_urls_mod11a1' introuvable</span></div><div class='input'>
<span class='co'>### Open the data :</span>
<span class='co'># When opening the data, do not forget to reset the CRS</span>
<span class='co'># here, MODIS crs : https://spatialreference.org/ref/sr-org/modis-sinusoidal-3/proj4/</span>
<span class='no'>modis_crs</span> <span class='kw'>&lt;-</span> <span class='st'>"+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs"</span>

<span class='co'>## open as a stars object (deals with multiple dimensions and time)</span>

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='no'>stars</span>)</div><div class='output co'>#&gt; <span class='message'>Le chargement a nécessité le package : stars</span></div><div class='output co'>#&gt; <span class='message'>Le chargement a nécessité le package : abind</span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='no'>magrittr</span>)</div><div class='output co'>#&gt; <span class='message'>Le chargement a nécessité le package : magrittr</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attachement du package : ‘magrittr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:testthat’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    equals, is_less_than, not</span></div><div class='input'>(<span class='no'>mod11a1_stars</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stars/topics/read_stars'>read_stars</a></span>(<span class='no'>res_dl</span>$<span class='no'>destfile</span>) <span class='kw'>%&gt;%</span> <span class='fu'>st_set_crs</span>(<span class='no'>modis_crs</span>))</div><div class='output co'>#&gt; <span class='error'>Error in read_stars(res_dl$destfile): objet 'res_dl' introuvable</span></div><div class='input'>
<span class='fu'><a href='https://www.rdocumentation.org/packages/stars/topics/plot'>plot</a></span>(<span class='no'>mod11a1_stars</span>)</div><div class='output co'>#&gt; <span class='error'>Error in plot(mod11a1_stars): objet 'mod11a1_stars' introuvable</span></div><div class='input'>
<span class='co'>## or open as a rasterBrick object (1 rasterBrick for each dimension)</span>

<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>require</a></span>(<span class='no'>raster</span>)</div><div class='output co'>#&gt; <span class='message'>Le chargement a nécessité le package : raster</span></div><div class='output co'>#&gt; <span class='message'>Le chargement a nécessité le package : sp</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attachement du package : ‘raster’</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:magrittr’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    extract</span></div><div class='input'>(<span class='no'>mod11a1_rast_day</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/raster/topics/brick'>brick</a></span>(<span class='no'>res_dl</span>$<span class='no'>destfile</span>,<span class='kw'>varname</span><span class='kw'>=</span><span class='st'>"LST_Day_1km"</span>,<span class='kw'>crs</span><span class='kw'>=</span><span class='no'>modis_crs</span>))</div><div class='output co'>#&gt; <span class='error'>Error in brick(res_dl$destfile, varname = "LST_Day_1km", crs = modis_crs): objet 'res_dl' introuvable</span></div><div class='input'>(<span class='no'>mod11a1_rast_night</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/raster/topics/brick'>brick</a></span>(<span class='no'>res_dl</span>$<span class='no'>destfile</span>,<span class='kw'>varname</span><span class='kw'>=</span><span class='st'>"LST_Night_1km"</span>,<span class='kw'>crs</span><span class='kw'>=</span><span class='no'>modis_crs</span>))</div><div class='output co'>#&gt; <span class='error'>Error in brick(res_dl$destfile, varname = "LST_Night_1km", crs = modis_crs): objet 'res_dl' introuvable</span></div><div class='input'>
<span class='fu'><a href='https://www.rdocumentation.org/packages/raster/topics/plot'>plot</a></span>(<span class='no'>mod11a1_rast_day</span><span class='kw'>[[</span><span class='fl'>1</span>]])</div><div class='output co'>#&gt; <span class='error'>Error in plot(mod11a1_rast_day[[1]]): objet 'mod11a1_rast_day' introuvable</span></div><div class='input'><span class='co'># Here the time dimension is set as the z dimension :</span>
(<span class='fu'><a href='https://www.rdocumentation.org/packages/raster/topics/zvalues'>getZ</a></span>(<span class='no'>mod11a1_rast_day</span>))</div><div class='output co'>#&gt; <span class='error'>Error in getZ(mod11a1_rast_day): objet 'mod11a1_rast_day' introuvable</span></div><div class='input'>
# Check out the vignettes for additional examples and more complex data import workflows


</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#note">Note</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Paul Taconet.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

